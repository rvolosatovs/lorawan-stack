// Copyright Â© 2017 The Things Network Foundation, distributed under the MIT license (see LICENSE file)

syntax = "proto3";

import "github.com/gogo/protobuf/gogoproto/gogo.proto";

package ttn.v3;

option go_package = "github.com/TheThingsNetwork/ttn/pkg/ttnpb";

// UserIdentifier is the message that is used to identify an user by ID or by email.
message UserIdentifier {
  oneof Identifiers {
    UserIDIdentifier id = 1 [(gogoproto.customname) = "ID"];
    UserEmailIdentifier email = 2;
  }
}

// UserIDIdentifier is the message that is used to identify an user by ID.
message UserIDIdentifier {
  // user_id is the ID of the user.
  string user_id = 1 [(gogoproto.customname) = "UserID"];
}

// UserEmailIdentifier is the message used to identify an user by email.
message UserEmailIdentifier {
  // email address of the user.
  string email = 1;
}

// ApplicationIdentifier is the message that is used to identify an application.
message ApplicationIdentifier {
  // TTN Application ID.
  string application_id = 1 [(gogoproto.customname) = "ApplicationID"];
}

// ApplicationAPIKeyIdentifier is the message that is used to identity an
// application API key.
message ApplicationAPIKeyIdentifier {
  ApplicationIdentifier application = 1 [(gogoproto.embed) = true, (gogoproto.nullable) = false];
  // key_name is the application API key name.
  string key_name = 2;
}

// GatewayIdentifier is the message that is used to identify a gateway.
message GatewayIdentifier {
  // TTN Gateway ID.
  string gateway_id = 1 [(gogoproto.customname) = "GatewayID"];
}

// EndDeviceIdentifiers message is carried with uplink and downlink messages.
// Unknown fields are left empty.
message EndDeviceIdentifiers {
  // TTN Device ID.
  string device_id = 1 [(gogoproto.customname) = "DeviceID"];
  // TTN Application ID.
  string application_id = 2 [(gogoproto.customname) = "ApplicationID"];

  // LoRaWAN DevEUI.
  bytes dev_eui = 4 [(gogoproto.customtype) = "github.com/TheThingsNetwork/ttn/pkg/types.EUI64", (gogoproto.customname) = "DevEUI"];
  // LoRaWAN JoinEUI (or AppEUI for LoRaWAN 1.0 end devices).
  bytes join_eui = 5 [(gogoproto.customtype) = "github.com/TheThingsNetwork/ttn/pkg/types.EUI64", (gogoproto.customname) = "JoinEUI"];
  // LoRaWAN DevAddr.
  bytes dev_addr = 6 [(gogoproto.customtype) = "github.com/TheThingsNetwork/ttn/pkg/types.DevAddr"];
}

// ClientIdentifier is the message that is used to identify a client.
message ClientIdentifier {
  // TTN Client ID.
  string client_id = 1 [(gogoproto.customname) = "ClientID"];
}
