// Copyright Â© 2018 The Things Network Foundation, The Things Industries B.V.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

$button($color)
  one-liner()
  background: $color
  border-radius: $br.m
  border: 0
  outline: 0
  font-weight: 600
  cursor: pointer
  color: white

  &:not(.busy) span:last-child
    vertical-align: middle
    nudge('up')

  &:not(:last-child)
    margin-right: $cs.s

  &:not(.naked)
    &:hover, &:focus
      hoverize($color)

    &:active
      activize($color)

  &:disabled
    opacity: .4

    &:hover:not(.naked)
      background: $color
      cursor: default

  &.naked
    background: transparent
    font-weight: 300
    border: 1px solid transparent

    &:not(.busy)
      color: $color

    &:focus:not(.busy):not(:active)
      color: darken($color, 8)
      border: 1px solid $color

  &.busy:not(.naked),
  &.busy:disabled
    position: relative
    if ($color != transparent)
      background: $c-backdrop
      color: transparent

      $s = lighter($color, 1)
    else
      $s = lighter($c-active-blue, 1)

    svg
      center-absolute()

    stop
      stop-color: $s

.button
  font: inherit
  display: inline-block
  padding: $cs.s $cs.l
  border-radius: 3px
  transition: color 100ms, background 100ms, border 100ms
  $button($c-active-blue)

  &.danger
    $button($c-warning)

  &.secondary
    $button($c-subtle-fill)

  &.error
    animation: shake 80ms 4 linear

  &.withIcon
    padding-left: $cs.m

    span:first-child
      margin-right: $cs.xs

  &.onlyIcon
    padding-left: $cs.s
    padding-right: $cs.s

.icon
  line-height: .8

@keyframes shake
  0%
    transform: translate(0)
  25%
    transform: translate(.4em)
  75%
    transform: translate(-.4em)
  100%
    transform: translate(0)

.content
  position: relative
  vertical-align: middle

.spinner
  position: absolute
  top: 0
  bottom: 0
  left: $cs.s * -1
  right: $cs.s * -1
